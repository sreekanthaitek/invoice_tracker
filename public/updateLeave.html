<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update</title>
    <link rel="icon" href="logo.jpeg" style="border-radius: 25px;">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <style>
        body{
            background-image: linear-gradient(to right, #db85a0,#b396b0,#b396b0,rgb(126, 126, 210));
        }
        .try{
            margin-bottom: 45px;
            margin-top: 40px;
            width: 150px;
            height: 50px;
        }
        .try:hover{
            height: 50px;
            width: 200px;
            border: none;
            border-radius: 20px;
        }
    </style>
</head>
<body>
    <h1 class="text-warning text-center "><b><i>Update details</i></b></h1>
    <form action="/getDetailsLeave" method="post">
        <div class="container">
            <div class="row">
                <div class="col-md">
                    <label for="name" class="form-label ms-2"><b class="text-danger star">* </b><b>Name</b></label>
                    <input type="text" class="form-control move" id="name" name="name" required placeholder="Please enter your Name">
                    <button class="btn btn-warning w-100 mt-2"><b><i>Get Details</i></b></button>
                </div>
            </div>
        </div>
    </form>
    <form class="g-3 needs-validation" action="/updateDetailsLeave" method="post">
        <div class="container">
            <div class="row">
                <div class="col-md mt-2">
                    <label for="name1" class="form-label ms-2"><b class="text-danger star">* </b><b>Name</b></label>
                    <input type="text" class="form-control move" id="name1" name="name" placeholder="Please enter your Name" readonly>
                </div>
                <div class="col-md mt-2">
                    <label for="cn" class="form-label ms-2"><b class="text-danger star">* </b><b>Company Name</b></label>
                    <input type="text" class="form-control move" id="cn" name="cn"  placeholder="Please enter your Company name">
                </div>
                <div class="col-md mt-2">
                    <label for="clientName" class="form-label ms-2"><b class="text-danger star">* </b><b>Client Name</b></label>
                    <input type="text" class="form-control move" id="clientName" name="clientName"  placeholder="Please enter your client name">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md">
                    <label for="year" class="form-label ms-2"><b class="text-danger star">* </b><b>Year</b></label>
                    <input type="text" class="form-control move" id="year" name="year"  placeholder="Please enter your Year">
                </div>
                <div class="col-md">
                    <label for="cf" class="form-label ms-2"><b class="text-danger star">* </b><b>Carry Forward leaves</b></label>
                    <input type="text" class="form-control move" id="cf" name="cf"  placeholder="Please enter your carry forward leaves">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md">
                    <label for="al" class="form-label ms-2"><b class="text-danger star">* </b><b>Annual leaves</b></label>
                    <input type="text" class="form-control move" id="al" name="al"  placeholder="Please enter your annual leaves">
                </div>
                <div class="col-md">
                    <label for="ml" class="form-label ms-2"><b class="text-danger star">* </b><b>Medical Leaves</b></label>
                    <input type="text" class="form-control move" id="ml" name="ml"  placeholder="Please enter your medical leaves">
                </div>
            </div>
        </div>
        <div class="container">
            <h3 class="text-light"><i>Annual Leaves</i></h3>
            <div class="row">
                <div class="col-md">
                    <label for="jan" class="form-label"><b>January</b></label>
                    <input type="text" class="form-control move" id="jan" name="jan" placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="feb" class="form-label"><b>February</b></label>
                    <input type="text" class="form-control move" id="feb" name="feb"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="mar" class="form-label"><b>March</b></label>
                    <input type="text" class="form-control move" id="mar" name="mar"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="apr" class="form-label"><b>April</b></label>
                    <input type="text" class="form-control move" id="apr" name="apr"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="may" class="form-label"><b>May</b></label>
                    <input type="text" class="form-control move" id="may" name="may"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="jun" class="form-label"><b>June</b></label>
                    <input type="text" class="form-control move" id="jun" name="jun"  placeholder="Please enter leaves taken">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md">
                    <label for="jul" class="form-label ms-2"><b>July</b></label>
                    <input type="text" class="form-control move" id="jul" name="jul"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="aug" class="form-label ms-2"><b>August</b></label>
                    <input type="text" class="form-control move" id="aug" name="aug"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="sep" class="form-label ms-2"><b>September</b></label>
                    <input type="text" class="form-control move" id="sep" name="sep"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="oct" class="form-label ms-2"><b>October</b></label>
                    <input type="text" class="form-control move" id="oct" name="oct"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="nov" class="form-label ms-2"><b>November</b></label>
                    <input type="text" class="form-control move" id="nov" name="nov"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="dec" class="form-label ms-2"><b>December</b></label>
                    <input type="text" class="form-control move" id="dec" name="dec"  placeholder="Please enter leaves taken">
                </div>
            </div>
        </div>
        <div class="container">
            <h3 class="text-light"><i>Medical Leaves</i></h3>
            <div class="row">
                <div class="col-md">
                    <label for="jan" class="form-label"><b>January</b></label>
                    <input type="text" class="form-control move" id="jan_ml" name="jan_ml" placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="feb" class="form-label"><b>February</b></label>
                    <input type="text" class="form-control move" id="feb_ml" name="feb_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="mar" class="form-label"><b>March</b></label>
                    <input type="text" class="form-control move" id="mar_ml" name="mar_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="apr" class="form-label"><b>April</b></label>
                    <input type="text" class="form-control move" id="apr_ml" name="apr_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="may" class="form-label"><b>May</b></label>
                    <input type="text" class="form-control move" id="may_ml" name="may_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="jun" class="form-label"><b>June</b></label>
                    <input type="text" class="form-control move" id="jun_ml" name="jun_ml"  placeholder="Please enter leaves taken">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md">
                    <label for="jul" class="form-label ms-2"><b>July</b></label>
                    <input type="text" class="form-control move" id="jul_ml" name="jul_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="aug" class="form-label ms-2"><b>August</b></label>
                    <input type="text" class="form-control move" id="aug_ml" name="aug_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="sep" class="form-label ms-2"><b>September</b></label>
                    <input type="text" class="form-control move" id="sep_ml" name="sep_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="oct" class="form-label ms-2"><b>October</b></label>
                    <input type="text" class="form-control move" id="oct_ml" name="oct_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="nov" class="form-label ms-2"><b>November</b></label>
                    <input type="text" class="form-control move" id="nov_ml" name="nov_ml"  placeholder="Please enter leaves taken">
                </div>
                <div class="col-md">
                    <label for="dec" class="form-label ms-2"><b>December</b></label>
                    <input type="text" class="form-control move" id="dec_ml" name="dec_ml"  placeholder="Please enter leaves taken">
                </div>
            </div>
        </div>
        <div class="container mt-3">
            <div class="row">
                <div class="col-md mb-2">
                    <input type="text" class="form-control move" id="aLeaves" name="aLeaves"  placeholder="Ignore this" readonly value="0">
                </div>
                <div class="col-md">
                    <input type="text" class="form-control move" id="mLeaves" name="mLeaves"  placeholder="Ignore this" readonly value="0">
                </div>
            </div>
        </div>
        <div class="text-center">
            <button class="btn btn-danger try" type="submit">Update</button>
        </div>
    </form>
    <script>
      document.querySelector('form:first-of-type').addEventListener('submit', async function (event) {
      event.preventDefault();

      const name = document.querySelector('[name="name"]').value;
      const response = await fetch('/getDetailsLeave', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: `name=${name}`,
      });

      const data = await response.json();
      console.log(data.name);
      if (data.message) {
        alert(data.message);
      } else {
          document.getElementById('name1').value = data.name;
          document.getElementById('year').value = data.year;
          document.getElementById('cn').value = data.cn;
          document.getElementById('clientName').value = data.clientName;
          document.getElementById('cf').value = data.cf;
          document.getElementById('al').value = data.al;
          document.getElementById('ml').value = data.ml;
          document.getElementById('jan').value = data.jan;
          document.getElementById('feb').value = data.feb;
          document.getElementById('mar').value = data.mar;
          document.getElementById('apr').value = data.apr;
          document.getElementById('may').value = data.may;
          document.getElementById('jun').value = data.jun;
          document.getElementById('jul').value = data.jul;
          document.getElementById('aug').value = data.aug;
          document.getElementById('sep').value = data.sep;
          document.getElementById('oct').value = data.oct;
          document.getElementById('nov').value = data.nov;
          document.getElementById('dec').value = data.dec;
          document.getElementById('jan_ml').value = data.jan_ml;
          document.getElementById('feb_ml').value = data.feb_ml;
          document.getElementById('mar_ml').value = data.mar_ml;
          document.getElementById('apr_ml').value = data.apr_ml;
          document.getElementById('may_ml').value = data.may_ml;
          document.getElementById('jun_ml').value = data.jun_ml;
          document.getElementById('jul_ml').value = data.jul_ml;
          document.getElementById('aug_ml').value = data.aug_ml;
          document.getElementById('sep_ml').value = data.sep_ml;
          document.getElementById('oct_ml').value = data.oct_ml;
          document.getElementById('nov_ml').value = data.nov_ml;
          document.getElementById('dec_ml').value = data.dec_ml;
      }
    });
    </script>
</body>
<script>
    (function () {
    'use strict'
    var forms = document.querySelectorAll('.needs-validation')
    Array.prototype.slice.call(forms)
        .forEach(function (form) {
        form.addEventListener('submit', function (event) {
            if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
            }
            form.classList.add('was-validated')
        }, false)
        })
    })()
</script>
</body>
<script>
    $(function(){
    var keyLeft = 37;
    var keyRight = 39;
    var keyUp = 38;
    var keyDown = 40;
    $(document).keydown(
        function(e)
        {
            var moves = $(".move");
            if (e.keyCode == keyRight) {
                for(i = 0; i <= moves.length; i++) {
                    if (moves[i] == $(".move:focus").get(0)) {
                       $(moves[i + 1]).focus();
                        break;
                    }
                }
            }
            if (e.keyCode == keyLeft) {
                for(i = 0; i <= moves.length; i++) {
                    if (moves[i] == $(".move:focus").get(0)) {
                       $(moves[i - 1]).focus();
                        break;
                    }
                }
            }
            if (e.keyCode == keyDown) {
                for(i = 0; i <= moves.length; i++) {
                    if (moves[i] == $(".move:focus").get(0)) {
                       $(moves[i + 6]).focus();
                        break;
                    }
                }
            }
            if (e.keyCode == keyUp) {
                for(i = 0; i <= moves.length; i++) {
                    if (moves[i] == $(".move:focus").get(0)) {
                       $(moves[i - 6]).focus();
                        break;
                    }
                }
            }
        }
    );
});
</script>
</html>
